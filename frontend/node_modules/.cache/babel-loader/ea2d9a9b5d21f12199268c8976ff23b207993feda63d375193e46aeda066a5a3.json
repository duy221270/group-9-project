{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\group-9-project\\\\frontend\\\\src\\\\pages\\\\Profile.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { selectUser, setLogin } from \"../store/authSlice\";\nimport api, { API_ORIGIN } from \"../api/axiosConfig\";\nimport AvatarEditor from \"react-avatar-editor\";\n\n/** Gh√©p base URL khi backend tr·∫£ v·ªÅ ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst withBase = url => url !== null && url !== void 0 && url.startsWith(\"http\") ? url : url ? `${API_ORIGIN}${url}` : \"\";\n\n/** Modal ƒë∆°n gi·∫£n */\nfunction Modal({\n  open,\n  onClose,\n  children,\n  title\n}) {\n  if (!open) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"fixed\",\n      inset: 0,\n      background: \"rgba(0,0,0,.6)\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      zIndex: 9999\n    },\n    onClick: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        width: 520,\n        maxWidth: \"95%\",\n        padding: 16\n      },\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: 0\n          },\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-sm\",\n          onClick: onClose,\n          style: {\n            background: \"var(--secondary)\"\n          },\n          children: \"\\u0110\\xF3ng\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 12\n        },\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 5\n  }, this);\n}\n_c = Modal;\nexport default function Profile() {\n  _s();\n  const dispatch = useDispatch();\n  const storeUser = useSelector(selectUser);\n  const [user, setUser] = useState(storeUser);\n  const [name, setName] = useState((storeUser === null || storeUser === void 0 ? void 0 : storeUser.name) || \"\");\n  const [message, setMessage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n\n  // ====== Upload & Crop ======\n  const [file, setFile] = useState(null); // file g·ªëc\n  const [cropOpen, setCropOpen] = useState(false);\n  const [scale, setScale] = useState(1.2);\n  const [rotate, setRotate] = useState(0);\n  const editorRef = useRef(null);\n  useEffect(() => {\n    setUser(storeUser);\n    setName((storeUser === null || storeUser === void 0 ? void 0 : storeUser.name) || \"\");\n  }, [storeUser]);\n  const avatarSrc = useMemo(() => {\n    return withBase(user === null || user === void 0 ? void 0 : user.avatar) || \"https://cdn-icons-png.flaticon.com/512/149/149071.png\";\n  }, [user]);\n  const roleNote = {\n    admin: \"üåü B·∫°n l√† Admin ‚Äî to√†n quy·ªÅn qu·∫£n l√Ω ng∆∞·ªùi d√πng.\",\n    moderator: \"üîß B·∫°n l√† Moderator ‚Äî c√≥ quy·ªÅn xem danh s√°ch user.\",\n    user: \"üë§ B·∫°n l√† User ‚Äî ch·ªâ c√≥ th·ªÉ ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n.\"\n  };\n\n  // ====== Update t√™n ======\n  const handleUpdateName = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setMessage(\"\");\n    try {\n      var _res$data;\n      const res = await api.put(\"/users/profile\", {\n        name\n      });\n      const newUser = {\n        ...user,\n        name: ((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.name) || name\n      };\n      const accessToken = localStorage.getItem(\"accessToken\");\n      const refreshToken = localStorage.getItem(\"refreshToken\");\n      dispatch(setLogin({\n        user: newUser,\n        accessToken,\n        refreshToken\n      }));\n      localStorage.setItem(\"user\", JSON.stringify(newUser));\n      setUser(newUser);\n      setMessage(\"‚úÖ C·∫≠p nh·∫≠t t√™n th√†nh c√¥ng!\");\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setMessage(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"‚ùå C·∫≠p nh·∫≠t th·∫•t b·∫°i!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ====== Ch·ªçn file v√† m·ªü modal crop ======\n  const onPickFile = e => {\n    var _e$target$files;\n    const f = (_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0];\n    if (!f) return;\n    // Gi·ªõi h·∫°n dung l∆∞·ª£ng nh·∫π nh√†ng (v√≠ d·ª• 5MB)\n    if (f.size > 5 * 1024 * 1024) {\n      setMessage(\"‚ö†Ô∏è ·∫¢nh qu√° l·ªõn (t·ªëi ƒëa 5MB).\");\n      return;\n    }\n    setFile(f);\n    setScale(1.2);\n    setRotate(0);\n    setCropOpen(true);\n  };\n\n  // ====== Upload sau khi crop ======\n  const uploadCropped = async () => {\n    if (!editorRef.current) return;\n    setLoading(true);\n    setMessage(\"\");\n    try {\n      var _res$data2;\n      // L·∫•y blob t·ª´ canvas (·∫£nh ƒë√£ crop + resize)\n      const canvas = editorRef.current.getImageScaledToCanvas();\n      const blob = await new Promise(resolve => canvas.toBlob(resolve, \"image/jpeg\", 0.9));\n      const form = new FormData();\n      form.append(\"avatar\", blob, \"avatar.jpg\");\n\n      // Gi·ªØ nguy√™n API c≈©: /users/upload-avatar (SV1/SV3 s·∫Ω g·ª≠i Cloudinary URL v·ªÅ avatarUrl)\n      const res = await api.post(\"/users/upload-avatar\", form, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      const newUser = {\n        ...user,\n        avatar: ((_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.avatarUrl) || (user === null || user === void 0 ? void 0 : user.avatar)\n      };\n      const accessToken = localStorage.getItem(\"accessToken\");\n      const refreshToken = localStorage.getItem(\"refreshToken\");\n\n      // C·∫≠p nh·∫≠t Redux + localStorage ƒë·ªÉ avatar lu√¥n c√≤n sau F5/Logout/Login\n      dispatch(setLogin({\n        user: newUser,\n        accessToken,\n        refreshToken\n      }));\n      localStorage.setItem(\"user\", JSON.stringify(newUser));\n      setUser(newUser);\n      setMessage(\"‚úÖ Upload avatar th√†nh c√¥ng!\");\n      setCropOpen(false);\n      setFile(null);\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error(err);\n      setMessage(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"‚ùå Upload th·∫•t b·∫°i!\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  if (!user) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\u0110ang t\\u1EA3i...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 149,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Th\\xF4ng tin c\\xE1 nh\\xE2n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        marginBottom: 16\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: avatarSrc,\n        alt: \"Avatar\",\n        style: {\n          width: 120,\n          height: 120,\n          borderRadius: \"50%\",\n          objectFit: \"cover\",\n          border: \"2px solid var(--accent)\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"T\\xEAn:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 12\n        }, this), \" \", user.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 12\n        }, this), \" \", user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), user.role && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Vai tr\\xF2:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 26\n        }, this), \" \", user.role]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 23\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"#fdd835\"\n        },\n        children: roleNote[user.role] || \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      style: {\n        margin: \"16px 0\",\n        borderColor: \"var(--secondary)\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleUpdateName,\n      className: \"form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"C\\u1EADp nh\\u1EADt t\\xEAn\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"T\\xEAn m\\u1EDBi\", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: name,\n          onChange: e => setName(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn\",\n        disabled: loading,\n        children: loading ? \"ƒêang l∆∞u...\" : \"L∆∞u thay ƒë·ªïi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      style: {\n        margin: \"16px 0\",\n        borderColor: \"var(--secondary)\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Upload Avatar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \"image/*\",\n        onChange: onPickFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this), !!message && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: 12,\n        textAlign: \"center\",\n        color: \"var(--accent)\"\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      open: cropOpen,\n      onClose: () => setCropOpen(false),\n      title: \"C\\u1EAFt \\u1EA3nh avatar\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: 16,\n          alignItems: \"center\",\n          flexDirection: \"column\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 320,\n            height: 320,\n            background: \"#0d1117\",\n            borderRadius: 12,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(AvatarEditor, {\n            ref: editorRef,\n            image: file,\n            width: 260,\n            height: 260,\n            border: 20,\n            borderRadius: 260 / 2,\n            color: [13, 17, 23, 0.6] // overlay\n            ,\n            scale: scale,\n            rotate: rotate\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Zoom: \", scale.toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"1\",\n            max: \"3\",\n            step: \"0.01\",\n            value: scale,\n            onChange: e => setScale(parseFloat(e.target.value)),\n            style: {\n              width: \"100%\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"Xoay: \", rotate, \"\\xB0\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: \"360\",\n            step: \"1\",\n            value: rotate,\n            onChange: e => setRotate(parseInt(e.target.value || \"0\", 10)),\n            style: {\n              width: \"100%\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            gap: 8,\n            justifyContent: \"flex-end\",\n            width: \"100%\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-sm\",\n            onClick: () => setCropOpen(false),\n            children: \"H\\u1EE7y\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: uploadCropped,\n            disabled: loading,\n            children: loading ? \"ƒêang t·∫£i...\" : \"L∆∞u & T·∫£i l√™n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(Profile, \"7eyJGfS3Em72G4KwLM8CymYathU=\", false, function () {\n  return [useDispatch, useSelector];\n});\n_c2 = Profile;\nvar _c, _c2;\n$RefreshReg$(_c, \"Modal\");\n$RefreshReg$(_c2, \"Profile\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","useSelector","useDispatch","selectUser","setLogin","api","API_ORIGIN","AvatarEditor","jsxDEV","_jsxDEV","Fragment","_Fragment","withBase","url","startsWith","Modal","open","onClose","children","title","style","position","inset","background","display","alignItems","justifyContent","zIndex","onClick","className","width","maxWidth","padding","e","stopPropagation","margin","fileName","_jsxFileName","lineNumber","columnNumber","marginTop","_c","Profile","_s","dispatch","storeUser","user","setUser","name","setName","message","setMessage","loading","setLoading","file","setFile","cropOpen","setCropOpen","scale","setScale","rotate","setRotate","editorRef","avatarSrc","avatar","roleNote","admin","moderator","handleUpdateName","preventDefault","_res$data","res","put","newUser","data","accessToken","localStorage","getItem","refreshToken","setItem","JSON","stringify","err","_err$response","_err$response$data","response","onPickFile","_e$target$files","f","target","files","size","uploadCropped","current","_res$data2","canvas","getImageScaledToCanvas","blob","Promise","resolve","toBlob","form","FormData","append","post","headers","avatarUrl","_err$response2","_err$response2$data","console","error","textAlign","marginBottom","src","alt","height","borderRadius","objectFit","border","email","role","color","borderColor","onSubmit","value","onChange","required","disabled","type","accept","gap","flexDirection","ref","image","toFixed","min","max","step","parseFloat","parseInt","_c2","$RefreshReg$"],"sources":["C:/Users/DELL/group-9-project/frontend/src/pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { selectUser, setLogin } from \"../store/authSlice\";\r\nimport api, { API_ORIGIN } from \"../api/axiosConfig\";\r\nimport AvatarEditor from \"react-avatar-editor\";\r\n\r\n/** Gh√©p base URL khi backend tr·∫£ v·ªÅ ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi */\r\nconst withBase = (url) =>\r\n  url?.startsWith(\"http\") ? url : url ? `${API_ORIGIN}${url}` : \"\";\r\n\r\n/** Modal ƒë∆°n gi·∫£n */\r\nfunction Modal({ open, onClose, children, title }) {\r\n  if (!open) return null;\r\n  return (\r\n    <div\r\n      style={{\r\n        position: \"fixed\",\r\n        inset: 0,\r\n        background: \"rgba(0,0,0,.6)\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        zIndex: 9999,\r\n      }}\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        className=\"card\"\r\n        style={{ width: 520, maxWidth: \"95%\", padding: 16 }}\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n          <h3 style={{ margin: 0 }}>{title}</h3>\r\n          <button className=\"btn btn-sm\" onClick={onClose} style={{ background: \"var(--secondary)\" }}>\r\n            ƒê√≥ng\r\n          </button>\r\n        </div>\r\n        <div style={{ marginTop: 12 }}>{children}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function Profile() {\r\n  const dispatch = useDispatch();\r\n  const storeUser = useSelector(selectUser);\r\n\r\n  const [user, setUser] = useState(storeUser);\r\n  const [name, setName] = useState(storeUser?.name || \"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // ====== Upload & Crop ======\r\n  const [file, setFile] = useState(null);       // file g·ªëc\r\n  const [cropOpen, setCropOpen] = useState(false);\r\n  const [scale, setScale] = useState(1.2);\r\n  const [rotate, setRotate] = useState(0);\r\n  const editorRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    setUser(storeUser);\r\n    setName(storeUser?.name || \"\");\r\n  }, [storeUser]);\r\n\r\n  const avatarSrc = useMemo(() => {\r\n    return withBase(user?.avatar) || \"https://cdn-icons-png.flaticon.com/512/149/149071.png\";\r\n  }, [user]);\r\n\r\n  const roleNote = {\r\n    admin: \"üåü B·∫°n l√† Admin ‚Äî to√†n quy·ªÅn qu·∫£n l√Ω ng∆∞·ªùi d√πng.\",\r\n    moderator: \"üîß B·∫°n l√† Moderator ‚Äî c√≥ quy·ªÅn xem danh s√°ch user.\",\r\n    user: \"üë§ B·∫°n l√† User ‚Äî ch·ªâ c√≥ th·ªÉ ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n.\",\r\n  };\r\n\r\n  // ====== Update t√™n ======\r\n  const handleUpdateName = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    try {\r\n      const res = await api.put(\"/users/profile\", { name });\r\n      const newUser = { ...user, name: res.data?.name || name };\r\n      const accessToken = localStorage.getItem(\"accessToken\");\r\n      const refreshToken = localStorage.getItem(\"refreshToken\");\r\n      dispatch(setLogin({ user: newUser, accessToken, refreshToken }));\r\n      localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n      setUser(newUser);\r\n      setMessage(\"‚úÖ C·∫≠p nh·∫≠t t√™n th√†nh c√¥ng!\");\r\n    } catch (err) {\r\n      setMessage(err.response?.data?.message || \"‚ùå C·∫≠p nh·∫≠t th·∫•t b·∫°i!\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ====== Ch·ªçn file v√† m·ªü modal crop ======\r\n  const onPickFile = (e) => {\r\n    const f = e.target.files?.[0];\r\n    if (!f) return;\r\n    // Gi·ªõi h·∫°n dung l∆∞·ª£ng nh·∫π nh√†ng (v√≠ d·ª• 5MB)\r\n    if (f.size > 5 * 1024 * 1024) {\r\n      setMessage(\"‚ö†Ô∏è ·∫¢nh qu√° l·ªõn (t·ªëi ƒëa 5MB).\");\r\n      return;\r\n    }\r\n    setFile(f);\r\n    setScale(1.2);\r\n    setRotate(0);\r\n    setCropOpen(true);\r\n  };\r\n\r\n  // ====== Upload sau khi crop ======\r\n  const uploadCropped = async () => {\r\n    if (!editorRef.current) return;\r\n    setLoading(true);\r\n    setMessage(\"\");\r\n    try {\r\n      // L·∫•y blob t·ª´ canvas (·∫£nh ƒë√£ crop + resize)\r\n      const canvas = editorRef.current.getImageScaledToCanvas();\r\n      const blob = await new Promise((resolve) => canvas.toBlob(resolve, \"image/jpeg\", 0.9));\r\n\r\n      const form = new FormData();\r\n      form.append(\"avatar\", blob, \"avatar.jpg\");\r\n\r\n      // Gi·ªØ nguy√™n API c≈©: /users/upload-avatar (SV1/SV3 s·∫Ω g·ª≠i Cloudinary URL v·ªÅ avatarUrl)\r\n      const res = await api.post(\"/users/upload-avatar\", form, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      });\r\n\r\n      const newUser = { ...user, avatar: res.data?.avatarUrl || user?.avatar };\r\n      const accessToken = localStorage.getItem(\"accessToken\");\r\n      const refreshToken = localStorage.getItem(\"refreshToken\");\r\n\r\n      // C·∫≠p nh·∫≠t Redux + localStorage ƒë·ªÉ avatar lu√¥n c√≤n sau F5/Logout/Login\r\n      dispatch(setLogin({ user: newUser, accessToken, refreshToken }));\r\n      localStorage.setItem(\"user\", JSON.stringify(newUser));\r\n      setUser(newUser);\r\n\r\n      setMessage(\"‚úÖ Upload avatar th√†nh c√¥ng!\");\r\n      setCropOpen(false);\r\n      setFile(null);\r\n    } catch (err) {\r\n      console.error(err);\r\n      setMessage(err.response?.data?.message || \"‚ùå Upload th·∫•t b·∫°i!\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!user) return <p>ƒêang t·∫£i...</p>;\r\n\r\n  return (\r\n    <>\r\n      {/* ===== Th√¥ng tin c√° nh√¢n ===== */}\r\n      <h2>Th√¥ng tin c√° nh√¢n</h2>\r\n      <div style={{ textAlign: \"center\", marginBottom: 16 }}>\r\n        <img\r\n          src={avatarSrc}\r\n          alt=\"Avatar\"\r\n          style={{\r\n            width: 120,\r\n            height: 120,\r\n            borderRadius: \"50%\",\r\n            objectFit: \"cover\",\r\n            border: \"2px solid var(--accent)\",\r\n          }}\r\n        />\r\n        <p><strong>T√™n:</strong> {user.name}</p>\r\n        <p><strong>Email:</strong> {user.email}</p>\r\n        {user.role && <p><strong>Vai tr√≤:</strong> {user.role}</p>}\r\n        <p style={{ color: \"#fdd835\" }}>{roleNote[user.role] || \"\"}</p>\r\n      </div>\r\n\r\n      <hr style={{ margin: \"16px 0\", borderColor: \"var(--secondary)\" }} />\r\n\r\n      {/* ===== C·∫≠p nh·∫≠t t√™n (gi·ªØ l·∫°i nh∆∞ ·∫£nh #1) ===== */}\r\n      <form onSubmit={handleUpdateName} className=\"form\">\r\n        <h3>C·∫≠p nh·∫≠t t√™n</h3>\r\n        <label>\r\n          T√™n m·ªõi\r\n          <input value={name} onChange={(e) => setName(e.target.value)} required />\r\n        </label>\r\n        <button className=\"btn\" disabled={loading}>\r\n          {loading ? \"ƒêang l∆∞u...\" : \"L∆∞u thay ƒë·ªïi\"}\r\n        </button>\r\n      </form>\r\n\r\n      <hr style={{ margin: \"16px 0\", borderColor: \"var(--secondary)\" }} />\r\n\r\n      {/* ===== Upload Avatar + Modal crop ===== */}\r\n      <div style={{ textAlign: \"center\" }}>\r\n        <h3>Upload Avatar</h3>\r\n        <input type=\"file\" accept=\"image/*\" onChange={onPickFile} />\r\n      </div>\r\n\r\n      {!!message && (\r\n        <p style={{ marginTop: 12, textAlign: \"center\", color: \"var(--accent)\" }}>{message}</p>\r\n      )}\r\n\r\n      {/* Modal Crop */}\r\n      <Modal open={cropOpen} onClose={() => setCropOpen(false)} title=\"C·∫Øt ·∫£nh avatar\">\r\n        <div style={{ display: \"flex\", gap: 16, alignItems: \"center\", flexDirection: \"column\" }}>\r\n          <div\r\n            style={{\r\n              width: 320,\r\n              height: 320,\r\n              background: \"#0d1117\",\r\n              borderRadius: 12,\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            {/* react-avatar-editor l√† M·ªòT component, kh√¥ng ph·∫£i array n√™n s·∫Ω kh√¥ng g√¢y l·ªói ‚Äúobjects are not valid as a React child‚Äù */}\r\n            <AvatarEditor\r\n              ref={editorRef}\r\n              image={file}\r\n              width={260}\r\n              height={260}\r\n              border={20}\r\n              borderRadius={260 / 2}\r\n              color={[13, 17, 23, 0.6]} // overlay\r\n              scale={scale}\r\n              rotate={rotate}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ width: \"100%\" }}>\r\n            <label>Zoom: {scale.toFixed(2)}</label>\r\n            <input\r\n              type=\"range\"\r\n              min=\"1\"\r\n              max=\"3\"\r\n              step=\"0.01\"\r\n              value={scale}\r\n              onChange={(e) => setScale(parseFloat(e.target.value))}\r\n              style={{ width: \"100%\" }}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ width: \"100%\" }}>\r\n            <label>Xoay: {rotate}¬∞</label>\r\n            <input\r\n              type=\"range\"\r\n              min=\"0\"\r\n              max=\"360\"\r\n              step=\"1\"\r\n              value={rotate}\r\n              onChange={(e) => setRotate(parseInt(e.target.value || \"0\", 10))}\r\n              style={{ width: \"100%\" }}\r\n            />\r\n          </div>\r\n\r\n          <div style={{ display: \"flex\", gap: 8, justifyContent: \"flex-end\", width: \"100%\" }}>\r\n            <button className=\"btn btn-sm\" onClick={() => setCropOpen(false)}>\r\n              H·ªßy\r\n            </button>\r\n            <button className=\"btn\" onClick={uploadCropped} disabled={loading}>\r\n              {loading ? \"ƒêang t·∫£i...\" : \"L∆∞u & T·∫£i l√™n\"}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}